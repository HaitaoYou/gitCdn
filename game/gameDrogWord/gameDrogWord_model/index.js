window.__require=function t(e,o,s){function n(r,a){if(!o[r]){if(!e[r]){var u=r.split("/");if(u=u[u.length-1],!e[u]){var c="function"==typeof __require&&__require;if(!a&&c)return c(u,!0);if(i)return i(u,!0);throw new Error("Cannot find module '"+r+"'")}r=u}var d=o[r]={exports:{}};e[r][0].call(d.exports,function(t){return n(e[r][1][t]||t)},d,d.exports,t,e,o,s)}return o[r].exports}for(var i="function"==typeof __require&&__require,r=0;r<s.length;r++)n(s[r]);return n}({GameDrogWord:[function(t,e,o){"use strict";cc._RF.push(e,"60068yNjhJJKrVCtkkmY3BE","GameDrogWord"),Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../common/common"),n=t("../../../../common/CConst"),i=t("../../../../common/Tools"),r=t("../../../../webtcp/NotifierCenter"),a=t("../../../../config/LoaderQuestion"),u=t("./ItemDrogWordQ"),c=t("./ItemDrogWordA"),d=cc._decorator,l=d.ccclass,p=d.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spBg=null,e.spBtn=null,e.spRole=null,e.spTip=null,e.spQuesIcon=null,e.content=null,e.arrAudio=[],e.nodeQues=null,e.itemQues=null,e.nodeAnswer=null,e.itemAnswer=null,e.btnNode=null,e.skeletonRole=null,e.isLock=!1,e.isStart=!1,e.isFinish=!1,e.quesIndex=0,e.quesTotal=0,e.quesError=0,e.selectItems=[],e.pageNum=0,e.dataQues=[],e.iconUrl=null,e.arrQues=[],e.arrAnswer=[],e}return __extends(e,t),e.prototype.onLoad=function(){r.default.listen(n.default.GAME_START,this.msgResultStart,this,!1),r.default.listen(n.default.GAME_TOUCH,this.msgResultTouch,this,!1)},e.prototype.onDisable=function(){r.default.ignore(n.default.GAME_START,this.msgResultStart,this),r.default.ignore(n.default.GAME_TOUCH,this.msgResultTouch,this),s.default.stopEffect()},e.prototype.onDestroy=function(){s.default.sendMessage({cmd:n.default.GAME_END,info:{}})},e.prototype.start=function(){this.initLocalData(),this.initGameData()},e.prototype.initLocalData=function(){this.pageNum=s.default.getPageNum();for(var t={titles:[],pairs:[]},e=a.default.getGameData(this.pageNum).dataQues.options,o=i.default.getArrayNoOrder(e),n=0;n<o.length;n++){var r=o[n];t.titles.push(r.title),t.pairs.push(r.index)}this.dataQues.push(t),this.quesTotal=this.dataQues.length},e.prototype.initGameData=function(){this.setIsLock(!0),this.initConnect(),this.updateGameUI(),this.btnNode.active=!this.isStart&&s.default.isTeacher(),this.content.active=!1,this.isStart&&(this.updateGameQues(),this.isFinish||this.nextQuestion())},e.prototype.initConnect=function(){var t=s.default.getInfoList();t&&t.cmd&&t.page&&t.page==this.pageNum&&t.info&&(this.isStart=!0,this.refreshDataForMsg(t.info),t.cmd==n.default.GAME_TOUCH&&this.updateDataForMsg(t.info),s.default.setInfoLast(null))},e.prototype.updateGameUI=function(){this.initQuesAndAnswer(),this.updateUIByScene()},e.prototype.initQuesAndAnswer=function(){for(var t=this.itemQues.getChildByName("back").width,e=this.dataQues[this.quesIndex].titles.length,o=i.default.getStartAndDis(e,t,1920),s=o.start,n=o.dis,r=0;r<e;r++){var a=cc.instantiate(this.itemQues);a.active=!0,a.position=cc.v3(s+n*r,0,0),a.setParent(this.nodeQues),this.arrQues.push(a);var u=cc.instantiate(this.itemAnswer);u.active=!0,u.position=cc.v3(s+n*r,0,0),u.setParent(this.nodeAnswer),this.arrAnswer.push(u)}},e.prototype.updateUIByScene=function(){var t=a.default.getResOne("bg");i.default.setSpriteFrame(this.spBg,t);var e=a.default.getResOne("btnStart");i.default.setSpriteFrame(this.spBtn,e);var o=a.default.getResOne("role");i.default.setSpriteFrame(this.spRole,o);var s=a.default.getResOne("tip");i.default.setSpriteFrame(this.spTip,s);for(var n=a.default.getResOne("back0"),r=0,u=this.arrQues.length;r<u;r++){var c=this.arrQues[r].getChildByName("icon").getComponent(cc.Sprite);i.default.setSpriteFrame(c,n)}var d=a.default.getResOne("back1");for(r=0,u=this.arrAnswer.length;r<u;r++)c=this.arrAnswer[r].getChildByName("icon").getComponent(cc.Sprite),i.default.setSpriteFrame(c,d);var l=a.default.getResOne("kuang");i.default.setSkeletonData(this.skeletonRole,l);var p=a.default.getResOne("che");for(r=0,u=this.arrAnswer.length;r<u;r++){var h=this.arrAnswer[r].getChildByName("skeleton").getComponent(sp.Skeleton);i.default.setSkeletonData(h,p)}},e.prototype.updateGameQues=function(){this.content.active=!0,this.updateUIForRole(),this.updateUIForLabel(),this.updateUIForSelect()},e.prototype.updateUIForRole=function(){var t=this.skeletonRole.node.parent;t.active=this.isStart,t.active&&i.default.playAnimation(this.skeletonRole,"daiji",!0,1,null)},e.prototype.updateUIForLabel=function(){for(var t=this.dataQues[this.quesIndex],e=0,o=this.arrQues.length;e<o;e++){var s=t.titles[e],n=e,i=this.arrQues[n].getComponent(u.default);a.default.setString(i.label,s);var r=t.pairs[n],d=this.arrAnswer[r].getComponent(c.default);a.default.setString(d.label,s)}},e.prototype.updateUIForSelect=function(){for(var t=0,e=this.arrQues.length;t<e;t++)this.updateUIForItemQ(t,!0);for(t=0,e=this.arrAnswer.length;t<e;t++)this.updateUIForItemA(t,!1);var o=this.dataQues[this.quesIndex].pairs;for(t=0,e=this.selectItems.length;t<e;t++){var s=this.selectItems[t];this.updateUIForItemQ(s,!1);var n=o[s];this.updateUIForItemA(n,!0)}this.isFinish&&(this.nodeAnswer.active=!1)},e.prototype.updateUIForItemQ=function(t,e){this.arrQues[t].active=e},e.prototype.updateUIForItemA=function(t,e){this.arrAnswer[t].getComponent(c.default).setIsSelect(e)},e.prototype.nextQuestion=function(){this.setIsLock(!1)},e.prototype.eventStart=function(){this.isStart||(this.isStart=!0,this.sendMessage(n.default.GAME_START,{}))},e.prototype.msgResultStart=function(t){var e=this;this.isStart=!0,this.btnNode.active=!1,this.refreshDataForMsg(t),this.updateGameQues(),this.nodeQues.active=!0,cc.tween(this.nodeQues).call(function(){e.nodeQues.opacity=0}).delay(4.8).to(.5,{opacity:255}).start();var o=this.skeletonRole.node.parent;o.active=!1,this.nodeAnswer.active=!0,cc.tween(this.nodeAnswer).call(function(){for(var t=0,o=e.arrAnswer.length;t<o;t++){var s=e.arrAnswer[t].getChildByName("skeleton").getComponent(sp.Skeleton);i.default.playAnimation(s,"dong1",!0,1,null)}e.nodeAnswer.x=-1920}).to(4,{x:0}).call(function(){for(var t=0,s=e.arrAnswer.length;t<s;t++){var n=e.arrAnswer[t].getChildByName("skeleton").getComponent(sp.Skeleton);i.default.playAnimation(n,"daiji1",!0,1,null)}o.active=!0,i.default.playAnimation(e.skeletonRole,"chuxian",!1,.65,function(){i.default.playAnimation(e.skeletonRole,"daiji",!0,1,null),e.nextQuestion()})}).start()},e.prototype.eventTouch=function(t){this.setIsLock(!0);var e=this.dataQues[this.quesIndex].pairs,o=this.arrQues.indexOf(t),s=e[o],i=this.arrQues[o],r=this.arrAnswer[s],a=i.getComponent(u.default),d=r.getComponent(c.default),l=a.nodeBack.getBoundingBoxToWorld(),p=d.nodeBack.getBoundingBoxToWorld(),h=l.intersects(p);this.sendMessage(n.default.GAME_TOUCH,{itemId:o,result:h})},e.prototype.msgResultTouch=function(t){var e=this;this.setIsLock(!0);var o=t.result,n=t.itemId;this.refreshDataForMsg(t);var i=null;o?(i=function(){e.updateDataForMsg(t),e.isFinish?e.scheduleOnce(function(){e.playAniWin()},.2):(e.updateUIForLabel(),e.nextQuestion())},s.default.playEffect(this.arrAudio[0]),this.playAniSuccess(n,i.bind(this))):(i=function(){e.updateDataForMsg(t),e.setIsLock(!1)},s.default.playEffect(this.arrAudio[1]),this.playAniWrong(n,i.bind(this)))},e.prototype.playAniSuccess=function(t,e){var o=this,s=this.dataQues[this.quesIndex].pairs,n=t,r=s[n];this.updateUIForItemQ(n,!1),this.updateUIForItemA(r,!0);var a=this.arrAnswer[r].getChildByName("skeleton").getComponent(sp.Skeleton);i.default.playAnimation(a,"zhuang",!1,1.25,function(){i.default.playAnimation(a,"daiji2",!0,1,null)}),cc.tween(this.node).delay(.8).call(function(){o.arrQues[n].getComponent(u.default).reSetPos(),e()}).start()},e.prototype.playAniWrong=function(t,e){var o=this.arrQues[t],s=o.x;cc.tween(o).to(.15,{x:s-20}).to(.15,{x:s+20}).to(.15,{x:s-20}).to(.15,{x:s}).call(function(){o.getComponent(u.default).reSetPos(),e()}).start()},e.prototype.playAniWin=function(){var t=this;this.nodeAnswer.active=!0,cc.tween(this.nodeAnswer).call(function(){for(var e=0,o=t.arrAnswer.length;e<o;e++){var s=t.arrAnswer[e].getChildByName("skeleton").getComponent(sp.Skeleton);i.default.playAnimation(s,"dong2",!0,1,null)}t.nodeAnswer.x=0}).to(4,{x:1920}).call(function(){t.nodeAnswer.active=!1,t.setIsLock(!0)}).start()},e.prototype.setIsLock=function(t){this.isLock=t;for(var e=0,o=this.arrQues.length;e<o;e++)this.arrQues[e].getComponent(u.default).setIsLock(this.isLock)},e.prototype.refreshDataForMsg=function(t){this.dataQues=t.dataQues,this.quesTotal=t.quesTotal,this.quesIndex=t.quesIndex,this.selectItems=t.selectItems,this.quesError=t.quesError},e.prototype.updateDataForMsg=function(t){if(t.result){var e=this.dataQues[this.quesIndex].pairs.length;this.selectItems.push(t.itemId),this.selectItems.length>e-1&&(this.quesIndex++,this.quesIndex>this.quesTotal-1?(this.quesIndex=this.quesTotal-1,this.isFinish=!0):this.selectItems.length=0)}else this.quesError++},e.prototype.sendMessage=function(t,e){var o={cmd:t,page:this.pageNum,info:{itemId:0,result:!1,dataQues:this.dataQues,quesTotal:this.quesTotal,quesIndex:this.quesIndex,quesError:this.quesError,selectItems:this.selectItems}};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(o.info[n]=e[n]);s.default.sendMessage(o)},__decorate([p(cc.Sprite)],e.prototype,"spBg",void 0),__decorate([p(cc.Sprite)],e.prototype,"spBtn",void 0),__decorate([p(cc.Sprite)],e.prototype,"spRole",void 0),__decorate([p(cc.Sprite)],e.prototype,"spTip",void 0),__decorate([p(cc.Sprite)],e.prototype,"spQuesIcon",void 0),__decorate([p(cc.Node)],e.prototype,"content",void 0),__decorate([p([cc.AudioClip])],e.prototype,"arrAudio",void 0),__decorate([p(cc.Node)],e.prototype,"nodeQues",void 0),__decorate([p(cc.Node)],e.prototype,"itemQues",void 0),__decorate([p(cc.Node)],e.prototype,"nodeAnswer",void 0),__decorate([p(cc.Node)],e.prototype,"itemAnswer",void 0),__decorate([p(cc.Node)],e.prototype,"btnNode",void 0),__decorate([p(sp.Skeleton)],e.prototype,"skeletonRole",void 0),__decorate([l],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../../common/CConst":void 0,"../../../../common/Tools":void 0,"../../../../common/common":void 0,"../../../../config/LoaderQuestion":void 0,"../../../../webtcp/NotifierCenter":void 0,"./ItemDrogWordA":"ItemDrogWordA","./ItemDrogWordQ":"ItemDrogWordQ"}],ItemDrogWordA:[function(t,e,o){"use strict";cc._RF.push(e,"c12dcePDrBBV5n0sOWBPoZW","ItemDrogWordA"),Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../common/Tools"),n=cc._decorator,i=n.ccclass,r=n.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeBack=null,e.skeleton=null,e.icon=null,e.label=null,e}return __extends(e,t),e.prototype.setIsSelect=function(t){this.icon.active=!t,this.label.node.active=t;var e=t?"daiji2":"daiji1";s.default.playAnimation(this.skeleton,e,!0,1,null)},__decorate([r(cc.Node)],e.prototype,"nodeBack",void 0),__decorate([r(sp.Skeleton)],e.prototype,"skeleton",void 0),__decorate([r(cc.Node)],e.prototype,"icon",void 0),__decorate([r(cc.Label)],e.prototype,"label",void 0),__decorate([i],e)}(cc.Component);o.default=a,cc._RF.pop()},{"../../../../common/Tools":void 0}],ItemDrogWordQ:[function(t,e,o){"use strict";cc._RF.push(e,"78b90UhYpdHpobSK6Z1xCuz","ItemDrogWordQ"),Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,n=s.ccclass,i=s.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeGame=null,e.nodeBack=null,e.label=null,e.isLock=!0,e.startPos=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.startPos=this.node.position,this.nodeBack.on(cc.Node.EventType.TOUCH_START,this.touchBeginEvent,this,!1),this.nodeBack.on(cc.Node.EventType.TOUCH_MOVE,this.touchMoveEvent,this,!1),this.nodeBack.on(cc.Node.EventType.TOUCH_END,this.touchEndEvent,this,!1),this.nodeBack.on(cc.Node.EventType.TOUCH_CANCEL,this.touchEndEvent,this,!1)},e.prototype.touchBeginEvent=function(){this.isLock||(this.node.zIndex=1)},e.prototype.touchMoveEvent=function(t){if(!this.isLock){var e=t.getLocation(),o=this.node.parent.convertToNodeSpaceAR(e);this.node.position=o}},e.prototype.touchEndEvent=function(){this.isLock||(this.node.zIndex=0,this.nodeGame.getComponent("GameDrogWord").eventTouch(this.node))},e.prototype.setIsLock=function(t){this.isLock=t},e.prototype.reSetPos=function(){this.node.position=this.startPos},__decorate([i(cc.Node)],e.prototype,"nodeGame",void 0),__decorate([i(cc.Node)],e.prototype,"nodeBack",void 0),__decorate([i(cc.Label)],e.prototype,"label",void 0),__decorate([n],e)}(cc.Component);o.default=r,cc._RF.pop()},{}]},{},["GameDrogWord","ItemDrogWordA","ItemDrogWordQ"]);